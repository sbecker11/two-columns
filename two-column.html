<!DOCTYPE html>
<html>
<head>
  <title>Two-Column Layout</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      display: flex;
      height: 10vh;
      overflow: hidden;
    }

    .left-column {
      flex: 1;
      background: black;
      overflow-y: scroll;
    }

    .right-column {
      flex: 1;
      background: gray;
    }

    .red-div {
      border: 1px-solid-white;
    }
  </style>
</head>
<body>
  <div class="left-column"></div>
  <div class="right-column"></div>

  <script>
    window.addEventListener('DOMContentLoaded', function() {
      create_new_red_objs();
      add_new_red_divs_to_left_column();
    });

    window.addEventListener('resize', function() {
      add_new_red_divs_to_left_column();
    });

    var red_objs;

    function create_new_red_objs() {
      red_objs = [];

      for (var i = 0; i < 10; i++) {
        z = getRandomValue(1, 8);
        var red_obj = {
          id: i,
          width: 150,
          height: 150,
          x_center: getRandomValue(-10, 10),
          y_center: i * (150 + 20) + getRandomValue(-50, 50),
          z: z,
          scale: (9 - z) / 8,
          bright: 40 - (60 / 7) * (z - 8)
        };

        console.log(JSON.stringify(red_obj));
        red_objs.push(red_obj);
      }
    }

    function getRandomValue(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function update_left_column_center() {
      var leftColumn = document.querySelector('.left-column');
      var rect = leftColumn.getBoundingClientRect();
      left_column_center_x = rect.left + rect.width / 2;
    }

    function log_red_div(red_div) {
      var str = 'red_div:';
      str += "id:" + red_div.id + "|";
      str += "class:" + red_div.className + "|";
      str += "left:" + red_div.style.left + "|";
      str += "top:" + red_div.style.top + "|";
      str += "width:" + red_div.style.width + "|";
      str += "height:" + red_div.style.height + "|";
      str += "zIndex:" + red_div.style.zIndex + "|";
      str += "filter:" + red_div.style.filter + "|";
      console.log(str);
    }
    function add_new_red_divs_to_left_column() {
      var leftColumn = document.querySelector('.left-column');
      leftColumn.innerHTML = '';
      update_left_column_center();

      red_objs.forEach(function(red_obj) {
        var red_div = document.createElement('div');
        red_div.id = red_obj.id;
        red_div.className = "red-div";
        red_div.style.position = 'absolute';
        red_div.style.left = red_obj.x_center + left_column_center_x + 'px';
        red_div.style.top = red_obj.y_center + red_obj.height / 2 + 'px';
        red_div.style.width = red_obj.width * red_obj.scale + 'px';
        red_div.style.height = red_obj.height * red_obj.scale + 'px';
        red_div.style.zIndex = -1 * red_obj.z;
        red_div.style.filter = 'brightness(' + red_obj.bright + ')';

        log_red_div(red_div);

        leftColumn.appendChild(red_div);
      });
    }
  </script>
</body>
</html>
